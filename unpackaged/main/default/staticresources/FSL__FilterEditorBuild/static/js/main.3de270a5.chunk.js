(this["webpackJsonpfilter-editor"]=this["webpackJsonpfilter-editor"]||[]).push([[0],[,,,,,,,function(e,t,i){},,function(e,t,i){e.exports=i(27)},,,,,,,,,,,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var a=i(0),l=i.n(a),s=i(8),n=i.n(s),r=(i(7),i(1)),o=i(2),d=i(4),c=i(3),u=(i(21),function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).state={},a.state[window.FilterEditor.fieldNames.Name]=e.object[window.FilterEditor.fieldNames.Name],a.state[window.FilterEditor.fieldNames.Description__c]=e.object[window.FilterEditor.fieldNames.Description__c],a.state[window.FilterEditor.fieldNames.Description__c]?a.state.charactersLeft=255-a.state[window.FilterEditor.fieldNames.Description__c].length:a.state.charactersLeft=255,a}return Object(o.a)(i,[{key:"render",value:function(){return l.a.createElement("div",{className:"fe-details-container section-container"},l.a.createElement("h1",{className:"section-title"},window.FilterEditor.labels.Details),l.a.createElement("div",{className:"fe-general-input-container"},l.a.createElement("label",{className:"fe-general-input-label"},window.FilterEditor.labels.Name),l.a.createElement("input",{type:"text",maxlength:"100",className:"fe-general-input-text",placeholder:window.FilterEditor.labels.NamePlaceholder,value:this.state[window.FilterEditor.fieldNames.Name],onChange:this.__fieldChanged.bind(this,window.FilterEditor.fieldNames.Name)})),l.a.createElement("div",{className:"fe-general-input-container"},l.a.createElement("label",{className:"fe-general-input-label"},window.FilterEditor.labels.Description),l.a.createElement("textarea",{className:"fe-general-input-textarea",maxlength:"255",placeholder:window.FilterEditor.labels.DescriptionPlaceholder,value:this.state[window.FilterEditor.fieldNames.Description__c],onChange:this.__fieldChanged.bind(this,window.FilterEditor.fieldNames.Description__c)}),l.a.createElement("div",null,window.FilterEditor.labels.CharactersLeft.replace("$0",this.state.charactersLeft))))}},{key:"componentWillReceiveProps",value:function(e){if(e.object){var t={};t[window.FilterEditor.fieldNames.Name]=e.object[window.FilterEditor.fieldNames.Name],t[window.FilterEditor.fieldNames.Description__c]=e.object[window.FilterEditor.fieldNames.Description__c],this.state[window.FilterEditor.fieldNames.Description__c]?t.charactersLeft=255-t[window.FilterEditor.fieldNames.Description__c].length:t.charactersLeft=255,this.setState(t)}}},{key:"__fieldChanged",value:function(e,t){var i={};i[e]=t.target.value,this.props.update(i)}}]),i}(a.Component)),h=(i(22),function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).state={minDays:e.object[window.FilterEditor.fieldNames.Days_after_horizon__c]||7,maxDays:e.object[window.FilterEditor.fieldNames.Days_before_horizon__c]||7,onlyGanttAppointments:e.object[window.FilterEditor.fieldNames.List_only_appointments_on_the_gantt__c]||!1},a}return Object(o.a)(i,[{key:"render",value:function(){return l.a.createElement("div",{className:"fe-date-selection section-container"},l.a.createElement("h1",{className:"section-title"},window.FilterEditor.labels.DateSelection),l.a.createElement("span",null,l.a.createElement("div",null,l.a.createElement("input",{type:"radio",value:"dates",name:"ganttapps",id:"fe-check-days",checked:!this.state.onlyGanttAppointments,onChange:this.onlyGanttChanged.bind(this)}),l.a.createElement("label",{for:"fe-check-days"},window.FilterEditor.labels.ShowSAFromLast,l.a.createElement("input",{className:"fe-general-input-text fe-date-input",type:"number",min:"0",max:"31",value:this.state.minDays,onChange:this.valueChanged.bind(this,"minDays"),onKeyPress:this.disableManualInput}),window.FilterEditor.labels.DaysAndNext,l.a.createElement("input",{className:"fe-general-input-text fe-date-input",type:"number",min:"0",max:"31",value:this.state.maxDays,onChange:this.valueChanged.bind(this,"maxDays"),onKeyPress:this.disableManualInput}),window.FilterEditor.labels.daysPastIt)),l.a.createElement("div",null,l.a.createElement("input",{type:"radio",value:"gantt",name:"ganttapps",id:"fe-check-gantt",checked:this.state.onlyGanttAppointments,onChange:this.onlyGanttChanged.bind(this)}),l.a.createElement("label",{for:"fe-check-gantt"},window.FilterEditor.labels.ShowOnlySaOnGantt))))}},{key:"disableManualInput",value:function(e){e.preventDefault()}},{key:"onlyGanttChanged",value:function(e){var t={};t[window.FilterEditor.fieldNames.List_only_appointments_on_the_gantt__c]="gantt"===e.target.value,this.props.update(t)}},{key:"valueChanged",value:function(e,t){var i={},a={};a[e]=t.target.value,"minDays"===e?i[window.FilterEditor.fieldNames.Days_before_horizon__c]=t.target.value:i[window.FilterEditor.fieldNames.Days_after_horizon__c]=t.target.value,this.props.update(i),this.setState(a)}},{key:"componentWillReceiveProps",value:function(e){var t={};t.onlyGanttAppointments=e.object[window.FilterEditor.fieldNames.List_only_appointments_on_the_gantt__c],t.maxDays=e.object[window.FilterEditor.fieldNames.Days_after_horizon__c],t.minDays=e.object[window.FilterEditor.fieldNames.Days_before_horizon__c],this.setState(t)}}]),i}(a.Component)),p=i(5),f="BOOLEAN",v="DATE",m="DATETIME",w="DOUBLE",E="EMAIL",b="ID",_="INTEGER",g="PICKLIST",F="REFERENCE",y="STRING",N="TEXTAREA",O="CURRENCY",C="PERCENT",D={equals:{label:window.FilterEditor.labels.equals,availability:[f,v,m,w,E,b,_,F,y,N,O,C]},"not equal to":{label:window.FilterEditor.labels.not_equal_to,availability:[f,v,m,w,E,b,_,F,y,N,O,C]},"less than":{label:window.FilterEditor.labels.less_than,availability:[v,m,_,w,y,N,O,C]},"greater than":{label:window.FilterEditor.labels.greater_than,availability:[v,m,_,w,y,N,O,C]},"less or equal":{label:window.FilterEditor.labels.less_or_equal,availability:[v,m,_,w,y,N,O,C]},"greater or equal":{label:window.FilterEditor.labels.greater_or_equal,availability:[v,m,_,w,y,N,O,C]},contains:{label:window.FilterEditor.labels.contains,availability:[g,y,N,F]},"does not contain":{label:window.FilterEditor.labels.does_not_contain,availability:[g,y,N,F]},"start with":{label:window.FilterEditor.labels.start_with,availability:[y,N,F]}},k=(i(23),function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).state={values:{}},e.picklist.forEach((function(t){a.state.values[t]=e.value.indexOf(t)>-1})),a}return Object(o.a)(i,[{key:"render",value:function(){var e=this;if(!this.props.showPicklist)return null;var t=[];for(var i in this.state.values)t.push(l.a.createElement("div",null,l.a.createElement("input",{type:"checkbox",id:"picklist_value_checkbox_"+t.length,checked:this.state.values[i],onChange:this.checkboxClicked.bind(this,i)}),l.a.createElement("label",{for:"picklist_value_checkbox_"+t.length},i)));return[l.a.createElement("div",{className:"fe-blocker",onClick:function(t){t.stopPropagation(),e.props.hide()}}),l.a.createElement("div",{className:"fe-picklist-background"},l.a.createElement("div",{className:"fe-picklist-select"},t))]}},{key:"componentWillReceiveProps",value:function(e){var t={values:{}};e.picklist.forEach((function(i){t.values[i]=e.value.indexOf(i)>-1})),this.setState(t)}},{key:"checkboxClicked",value:function(e,t){t.stopPropagation(),this.props.updateValue(e)}}]),i}(a.Component)),j=function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(e){var a;if(Object(r.a)(this,i),(a=t.call(this,e)).valueHtmlElement=null,a.dhtmlxCalendar=null,a.state={property:e.condition&&e.condition.property||null,operator:e.condition&&e.condition.operator||null,value:e.condition&&e.condition.value||null,valueDateDisplay:null,showPicklist:!1,picklistValueDisplay:null,isValid:!1,isEmpty:!0,errorMessage:null},a.state.value&&(a.state.isEmpty=!1,a.state.isValid=!0,Array.isArray(a.state.value)&&(a.state.picklistValueDisplay=a.state.value.join(", "))),a.state.property){var l=e.fields[a.state.property][1];"DATETIME"===l&&a.state.value?a.state.valueDateDisplay=new Date(a.state.value).toLocaleString():"DATE"===l&&a.state.value?a.state.valueDateDisplay=new Date(a.state.value).toLocaleDateString():"BOOLEAN"===l&&("false"===a.state.value?a.state.value=!1:a.state.value=!0)}return a}return Object(o.a)(i,[{key:"componentDidMount",value:function(){if(this.state.property){var e=this.props.fields[this.state.property][1];"DATE"===e?(this.dhtmlxCalendar=new window.dhtmlXCalendarObject("value_field_"+this.props.index),this.dhtmlxCalendar.hideTime(),this.attachDhtmlxEvents()):"DATETIME"===e&&(this.dhtmlxCalendar=new window.dhtmlXCalendarObject("value_field_"+this.props.index),this.attachDhtmlxEvents())}}},{key:"componentDidUpdate",value:function(e,t){if(this.state.property){var i=this.props.fields[this.state.property][1];if(t.property&&t.property)if(this.props.fields[t.property][1]===i)return;"DATE"===i?(this.dhtmlxCalendar=new window.dhtmlXCalendarObject("value_field_"+this.props.index),this.dhtmlxCalendar.hideTime(),this.attachDhtmlxEvents()):"DATETIME"===i&&(this.dhtmlxCalendar=new window.dhtmlXCalendarObject("value_field_"+this.props.index),this.attachDhtmlxEvents())}}},{key:"render",value:function(){var e=this.state.isValid||this.state.isEmpty?null:l.a.createElement("div",{className:"fe-condition-error"},this.state.errorMessage);return l.a.createElement("div",{className:"fe-condition"},l.a.createElement("span",{class:"fe-condition-index"},this.props.index,"."),l.a.createElement("select",{className:"fe-select fe-select-field",onChange:this.propertyChanged.bind(this),value:this.state.property},this.generateFieldOptions()),l.a.createElement("select",{className:"fe-select fe-select-operator",onChange:this.operatorChanged.bind(this),value:this.state.operator},"disabled=",!this.state.operator,">",this.generateOperatorOptions()),this.generateValueInput(),e)}},{key:"generateValueInput",value:function(){var e=this,t=null;return this.state.property&&(t=this.props.fields[this.state.property][1]),"BOOLEAN"===t?l.a.createElement("select",{className:"fe-select fe-select-value",onChange:this.valueChanged.bind(this),value:this.state.value},l.a.createElement("option",{value:!0},"true"),l.a.createElement("option",{value:!1},"false")):"PICKLIST"===t?[l.a.createElement("input",{type:"text",value:this.state.picklistValueDisplay,title:this.state.picklistValueDisplay,readOnly:!0,className:"fe-general-input-text",onClick:function(){return e.setState({showPicklist:!0})}}),l.a.createElement(k,{value:this.state.value,updateValue:this.updatePicklistValues.bind(this),showPicklist:this.state.showPicklist,picklist:this.props.fields[this.state.property][2],hide:function(){return e.setState({showPicklist:!1})}})]:l.a.createElement("input",{type:"text",id:"value_field_"+this.props.index,onChange:this.valueChanged.bind(this),className:"fe-general-input-text",disabled:!this.state.property,ref:function(t){return e.valueHtmlElement=t},readOnly:this.state.property&&("DATE"===this.props.fields[this.state.property][1]||"DATETIME"===this.props.fields[this.state.property][1]),value:this.state.valueDateDisplay||this.state.value})}},{key:"generateFieldOptions",value:function(){var e=[],t=this.props.fields;e.push(l.a.createElement("option",{value:""},"-- None --"));var i=[];for(var a in t){var s=void 0;s="REFERENCE"===t[a][1]&&t[a][0].indexOf(" ID")>-1?t[a][0].substr(0,t[a][0].indexOf(" ID")):t[a][0],i.push([a,s])}return i.sort((function(e,t){return e[1].localeCompare(t[1])})),i.forEach((function(t){e.push(l.a.createElement("option",{value:t[0]},t[1]))})),e}},{key:"generateOperatorOptions",value:function(){if(!this.props.fields||!this.state.property)return null;var e=[],t=[];for(var i in D){var a=this.props.fields[this.state.property][1];D[i].availability.indexOf(a)>-1&&(e.push(l.a.createElement("option",{value:i},D[i].label)),t.push(i))}return-1===t.indexOf(this.state.operator)&&this.setState({operator:t[0]}),e}},{key:"attachDhtmlxEvents",value:function(){var e=this;this.dhtmlxCalendar.attachEvent("onChange",(function(t,i){var a="DATETIME"===e.props.fields[e.state.property][1]?t.toLocaleString():t.toLocaleDateString();e.setState({value:t.getTime(),valueDateDisplay:a});var l={};l[e.props.index]={property:e.state.property,operator:e.state.operator,value:t.getTime(),isValid:!0,isEmpty:!1},e.props.updateCondition(l)})),this.dhtmlxCalendar.attachEvent("onShow",(function(){e.state.value&&e.dhtmlxCalendar.setDate(new Date(e.state.value))}))}},{key:"propertyChanged",value:function(e){var t=this,i={property:e.target.value},a=""!==e.target.value?this.props.fields[e.target.value][1]:null;a||(i.operator=null,i.property=null,i.valueDateDisplay=null),this.valueHtmlElement&&(this.valueHtmlElement.value=null),i.value=null,"DATETIME"!==a&&"DATE"!==a&&this.dhtmlxCalendar&&this.dhtmlxCalendar.unload&&(this.dhtmlxCalendar.unload(),i.valueDateDisplay=null),"PICKLIST"===a?(i.value=[],i.picklistValueDisplay=null):"DATE"===a||"DATETIME"===a||"BOOLEAN"===a&&(i.value=!0),this.setState(i,(function(){t.addConditionToFilterObject()}))}},{key:"operatorChanged",value:function(e){var t=this;this.setState({operator:e.target.value},(function(){t.addConditionToFilterObject()}))}},{key:"valueChanged",value:function(e,t){var i=this;if(2===arguments.length)return"true"===e&&(e=!0),"false"===e&&(e=!1),void this.setState({value:e},(function(){"true"===e&&(e=!0),"false"===e&&(e=!1),i.addConditionToFilterObject()}));this.setState({value:e.target.value},(function(){i.addConditionToFilterObject()}))}},{key:"updatePicklistValues",value:function(e){var t,i=this,a=this.state.value.indexOf(e);-1===a?t=[].concat(Object(p.a)(this.state.value),[e]).sort():(t=Object(p.a)(this.state.value)).splice(a,1),this.setState({value:t,picklistValueDisplay:t.join(", ")},(function(){i.addConditionToFilterObject()}))}},{key:"checkIfHaveNull",value:function(){return!this.state.property||!this.state.operator||!this.state.value}},{key:"addConditionToFilterObject",value:function(){var e=this;if(this.state.property){var t={};this.checkIfValid((function(){t[e.props.index]={property:e.state.property,operator:e.state.operator,value:e.state.value,isValid:e.state.isValid},e.props.updateCondition(t)}))}else this.props.updateCondition(this.props.index,!0)}},{key:"checkIfValid",value:function(e){var t={},i=this.state.property,a=this.state.value;if(!i)return t.isEmpty=!0,t.isValid=!0,void this.setState({isValid:t.isValid,errorMessage:null,isEmpty:t.isEmpty});t.isEmpty=!1;var l=this.props.fields[this.state.property][1],s=!0;if(a)switch(l){case"DATETIME":var n=new Date(a);"Invalid Date"===n.toString()&&(t.isValid=!1,t.errorMessage=window.FilterEditor.labels.InvalidDateFormat,s=!1);break;case"DATE":"Invalid Date"===(n=new Date(a)).toString()&&(t.isValid=!1,t.errorMessage=window.FilterEditor.labels.InvalidDateFormat,s=!1);break;case"INTEGER":/^\d+$/.test(a)||(t.isValid=!1,t.errorMessage=window.FilterEditor.labels.InvalidNumber,s=!1);break;case"DOUBLE":isNaN(parseFloat(a))&&(t.isValid=!1,t.errorMessage=window.FilterEditor.labels.InvalidNumber,s=!1)}else t.isValid=!0,s=!1;s&&(t.isValid=!0,t.errorMessage=null),this.setState({isValid:t.isValid,errorMessage:t.errorMessage,isEmpty:t.isEmpty},e)}}]),i}(a.Component),x=(i(24),function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).MAX_CRITERIAS=10,a.state={numberOfConditions:0,operators:[],logic:null},a}return Object(o.a)(i,[{key:"render",value:function(){return l.a.createElement("div",{className:"fe-critera-container section-container"},l.a.createElement("h1",{className:"section-title"},window.FilterEditor.labels.AdditionalCriteria),l.a.createElement("div",null,l.a.createElement("span",{className:"fe-select-critera-title fe-title-field"},window.FilterEditor.labels.Field),l.a.createElement("span",{className:"fe-select-critera-title fe-title-operator"},window.FilterEditor.labels.Operator),l.a.createElement("span",{className:"fe-select-critera-title fe-title-value"},window.FilterEditor.labels.Value)),l.a.createElement("div",{className:"fe-general-input-container"},this.state.operators),l.a.createElement("div",{className:"fe-add-remove-rows"},l.a.createElement("span",{onClick:this.addRow.bind(this)},window.FilterEditor.labels.AddRow),l.a.createElement("span",{onClick:this.removeRow.bind(this)},window.FilterEditor.labels.RemoveRow)),l.a.createElement("div",{className:"fe-general-input-container"},l.a.createElement("label",{className:"fe-general-input-label"},window.FilterEditor.labels.LogicFilter),l.a.createElement("input",{type:"text",value:this.state.logic,onChange:this.updateLogicFilter.bind(this),className:"fe-general-input-text fe-logic-input",placeholder:window.FilterEditor.labels.LogicFilterExample})))}},{key:"componentWillReceiveProps",value:function(e){var t={},i=!1;if(this.state.logic!==e.object[window.FilterEditor.fieldNames.Logic__c]&&(i=!0,t.logic=e.object[window.FilterEditor.fieldNames.Logic__c]),e.fields&&Object.keys(e.fields).length>0){var a=[],s=0;for(var n in e.conditions)s=s>Number.parseInt(n)?s:Number.parseInt(n);var r=s>this.state.operators.length?s:this.state.operators.length;r<5&&(r=5);for(var o=1;o<r+1;o++)e.conditions[o]?a.push(l.a.createElement(j,{index:o,fields:e.fields,updateCondition:this.props.updateCondition,condition:e.conditions[o]})):a.push(l.a.createElement(j,{index:o,fields:e.fields,updateCondition:this.props.updateCondition}));t.operators=a,i=!0}i&&this.setState(t)}},{key:"addRow",value:function(){if(this.state.operators.length<this.MAX_CRITERIAS){var e=[].concat(Object(p.a)(this.state.operators),[l.a.createElement(j,{index:this.state.operators.length+1,fields:this.props.fields,updateCondition:this.props.updateCondition})]);this.setState({operators:e})}}},{key:"removeRow",value:function(){if(this.state.operators.length>5){var e=Object(p.a)(this.state.operators);e.pop(),this.props.updateCondition(e.length+1,!0),this.setState({operators:e})}}},{key:"updateLogicFilter",value:function(e){var t={};t[window.FilterEditor.fieldNames.Logic__c]=e.target.value,this.props.update(t)}}]),i}(a.Component)),S=(i(25),function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).state={public:e.object[window.FilterEditor.fieldNames.Public__c]||!1},a}return Object(o.a)(i,[{key:"render",value:function(){var e=null,t=null;return window.FilterEditor.customPermissions.Create_custom_Gantt_filters&&window.FilterEditor.customPermissions.Publish_custom_Gantt_filters&&(e=l.a.createElement("div",{className:"fe-checkbox-save"},l.a.createElement("input",{type:"checkbox",id:"fe-save-for",checked:this.state.public,onChange:this.publicChanged.bind(this)}),l.a.createElement("label",{for:"fe-save-for"},window.FilterEditor.labels.AvailableForAllUsers))),this.props.object.Id&&(t=l.a.createElement("div",{class:"fe-save-as-button",onClick:this.saveAs.bind(this)},window.FilterEditor.labels.SaveAs)),l.a.createElement("div",{className:"fe-save-area"},e,l.a.createElement("div",{class:"fe-save-button",onClick:this.props.save.bind(this,!1)},window.FilterEditor.labels.Save),t)}},{key:"publicChanged",value:function(e){var t={};t[window.FilterEditor.fieldNames.Public__c]=e.target.checked,this.props.update(t)}},{key:"componentWillReceiveProps",value:function(e){this.setState({public:e.object[window.FilterEditor.fieldNames.Public__c]||!1})}},{key:"saveAs",value:function(){var e=window.prompt(window.FilterEditor.labels.EnterFilterName,this.props.object[window.FilterEditor.fieldNames.Name]);null!==e&&(""!=e?this.props.save(e):window.alert(window.FilterEditor.labels.MustHaveName))}}]),i}(a.Component)),A=(i(26),function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(e){var a;return Object(r.a)(this,i),(a=t.call(this,e)).state={selectedFieldsArray:[],availableFieldsArray:[]},a.seletedSelectElement=null,a.availableSelectElement=null,a}return Object(o.a)(i,[{key:"render",value:function(){var e=this,t=[],i=[];this.state.selectedFieldsArray.forEach((function(t){e.props.fields[t]&&i.push(l.a.createElement("option",{value:t},e.props.fields[t].Label.replace(" ID","")))}));var a=this.props.fields,s=this.state.availableFieldsArray;s.sort((function(e,t){return a[e].Label.localeCompare(a[t].Label)})),s.forEach((function(i){e.props.fields[i]&&t.push(l.a.createElement("option",{value:i},e.props.fields[i].Label.replace(" ID","")))}));var n=l.a.createElement("div",{className:"df-FieldsContainer"},l.a.createElement("select",{multiple:!0,className:"df-select",ref:function(t){return e.availableSelectElement=t}},t),l.a.createElement("div",{className:"df-actions-container"},l.a.createElement("div",{className:"df-action-button",onClick:this.__swapLists.bind(this,!0)},">"),l.a.createElement("div",{className:"df-action-button",onClick:this.__swapLists.bind(this,!1)},"<")),l.a.createElement("select",{multiple:!0,className:"df-select",ref:function(t){return e.seletedSelectElement=t}},i),l.a.createElement("div",{className:"df-actions-container"},l.a.createElement("div",{className:"df-action-button",onClick:this.__changeOrderUp.bind(this)},l.a.createElement("div",{className:"rotate-up"},"<")),l.a.createElement("div",{className:"df-action-button",onClick:this.__changeOrderDown.bind(this)},l.a.createElement("div",{className:"rotate-down"},"<"))));return l.a.createElement("div",{className:"fe-details-container section-container"},l.a.createElement("h1",{className:"section-title"},window.FilterEditor.labels.DisplayFieldsFE),l.a.createElement("div",{className:"df-explain"},window.FilterEditor.labels.ExplainFE),n)}},{key:"componentWillReceiveProps",value:function(e){var t={},i=e.object[window.FilterEditor.fieldNames.Displayed_Fields__c],a=null,l=[],s=[];for(var n in i&&(a=JSON.parse(e.object[window.FilterEditor.fieldNames.Displayed_Fields__c])),e.fields)a&&a.indexOf(n)>-1?l.push(n):s.push(n);t.selectedFieldsArray=a||l,t.availableFieldsArray=s.sort(),t.showFields=a,this.setState(t)}},{key:"__swapLists",value:function(e){for(var t,i,a,l,s=[],n=e?this.availableSelectElement.selectedOptions:this.seletedSelectElement.selectedOptions,r=[],o=[],d=0;d<n.length;d++)s.push(n[d].value);e?((t=r=Object(p.a)(this.state.selectedFieldsArray)).push.apply(t,s),(i=o).push.apply(i,Object(p.a)(this.state.availableFieldsArray.filter((function(e){return-1===s.indexOf(e)}))))):((a=o=Object(p.a)(this.state.availableFieldsArray)).push.apply(a,s),(l=r).push.apply(l,Object(p.a)(this.state.selectedFieldsArray.filter((function(e){return-1===s.indexOf(e)})))));var c=Object.assign({},this.state);c.selectedFieldsArray=r,c.availableFieldsArray=o,this.setState(c),this.props.updateSelectedFields(r)}},{key:"__changeOrderUp",value:function(){var e=Object(p.a)(this.state.selectedFieldsArray),t=this.seletedSelectElement.selectedOptions,i=[];if(0!==t.length){for(var a=0;a<t.length;a++)i.push(t[a].value);for(var l=0;l<e.length;l++)if(0!==l&&i.indexOf(e[l])>-1){var s=l-1,n=e[l];e[l]=e[s],e[s]=n}var r=Object.assign({},this.state);r.selectedFieldsArray=e,this.seletedSelectElement.selectedIndex=-1,this.setState(r,(function(){for(var e=0;e<this.seletedSelectElement.length;e++)i.includes(this.seletedSelectElement[e].value)&&(this.seletedSelectElement[e].selected=!0)})),this.props.updateSelectedFields(e)}}},{key:"__changeOrderDown",value:function(){var e=Object(p.a)(this.state.selectedFieldsArray),t=this.seletedSelectElement.selectedOptions,i=[];if(0!==t.length){for(var a=0;a<t.length;a++)i.push(t[a].value);for(var l=e.length-2;l>=0;l--)if(i.indexOf(e[l])>-1){var s=l+1,n=e[l];e[l]=e[s],e[s]=n}var r=Object.assign({},this.state);r.selectedFieldsArray=e,this.seletedSelectElement.selectedIndex=-1,this.setState(r,(function(){for(var e=0;e<this.seletedSelectElement.length;e++)i.includes(this.seletedSelectElement[e].value)&&(this.seletedSelectElement[e].selected=!0)})),this.props.updateSelectedFields(e)}}}]),i}(a.Component)),I=function(e){Object(d.a)(i,e);var t=Object(c.a)(i);function i(){var e;Object(r.a)(this,i),e=t.call(this);var a={Id:window.FilterEditor.id};return a[window.FilterEditor.fieldNames.Name]=null,a[window.FilterEditor.fieldNames.Description__c]=null,a[window.FilterEditor.fieldNames.Days_after_horizon__c]=3,a[window.FilterEditor.fieldNames.Days_before_horizon__c]=3,a[window.FilterEditor.fieldNames.Criterias__c]=!1,a[window.FilterEditor.fieldNames.List_only_appointments_on_the_gantt__c]=null,a[window.FilterEditor.fieldNames.Logic__c]=null,a[window.FilterEditor.fieldNames.Public__c]=!1,e.selectedFieldsJson=null,e.state={ganttFilter:a,conditions:{},fields:null,allFields:{}},e.getData(),e.saving=!1,e}return Object(o.a)(i,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(u,{object:this.state.ganttFilter,update:this.updateObject.bind(this)}),l.a.createElement(h,{object:this.state.ganttFilter,update:this.updateObject.bind(this)}),l.a.createElement(x,{object:this.state.ganttFilter,fields:this.state.fields,conditions:this.state.conditions,update:this.updateObject.bind(this),updateCondition:this.updateCondition.bind(this)}),l.a.createElement(A,{fields:this.state.allFields,object:this.state.ganttFilter,updateSelectedFields:this.updateSelectedFields.bind(this)}),l.a.createElement(S,{object:this.state.ganttFilter,update:this.updateObject.bind(this),save:this.save.bind(this)}))}},{key:"getData",value:function(){var e=this;window.Visualforce.remoting.Manager.invokeAction(window.FilterEditor.remoteActions.getData,this.state.ganttFilter.Id,(function(t,i){i.status&&function(){var i={};if(t.ganttFilter&&t.ganttFilter[window.FilterEditor.fieldNames.Criterias__c])try{i.conditions=JSON.parse(t.ganttFilter[window.FilterEditor.fieldNames.Criterias__c])}catch(n){console.warn("CAN NOT PARSE CRITERIA JSON"),alert(window.FilterEditor.labels.CustomFilterInvalidCriteria.replace("{0}",t.ganttFilter[window.FilterEditor.fieldNames.Name]))}for(var a in i.ganttFilter=t.ganttFilter||e.state.ganttFilter,i.ganttFilter[window.FilterEditor.fieldNames.List_only_appointments_on_the_gantt__c]=i.ganttFilter[window.FilterEditor.fieldNames.List_only_appointments_on_the_gantt__c]||!1,i.fields={},t.fields)-1===a.indexOf(".")&&(i.fields[a]=t.fields[a]);i.fields.FSL__RULE_VIOLATIONS__FSL=["Rule Violations","BOOLEAN"],e.selectedFieldsJson=i.ganttFilter[window.FilterEditor.fieldNames.Displayed_Fields__c]?i.ganttFilter[window.FilterEditor.fieldNames.Displayed_Fields__c]:null;var l={};for(var s in t.allFields)t.allFields[s].forEach((function(e){return l[e.FullAPIName]=e}));i.allFields=l,e.setState(i)}()}),{buffer:!0,escape:!1,timeout:12e4})}},{key:"updateObject",value:function(e){this.setState({ganttFilter:Object.assign(this.state.ganttFilter,e)})}},{key:"updateCondition",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={};i?this.state.conditions[e]&&(delete(t=Object.assign({},this.state.conditions))[e],a.ganttFilter=Object.assign({},this.state.ganttFilter),a.ganttFilter[window.FilterEditor.fieldNames.Criterias__c]=JSON.stringify(t),a.conditions=t,this.setState(a)):(t=Object.assign({},this.state.conditions,e),a.conditions=t,a.ganttFilter=Object.assign({},this.state.ganttFilter),a.ganttFilter[window.FilterEditor.fieldNames.Criterias__c]=JSON.stringify(t),this.setState(a))}},{key:"validateLogicFilter",value:function(){var e=this.state.ganttFilter[window.FilterEditor.fieldNames.Logic__c];if(!e)return!0;e=(e=(e=e.split("AND").join("&&")).split("OR").join("||")).split("NOT").join("!");for(var t=2;t<=10;t++)e=e.split(t).join("true");e=e.split(1).join("true");var i=!1;try{window.eval(e),i=!0}catch(a){console.log("bad format")}return i&&this.checkIfAllConditionsInLogic(this.state.ganttFilter[window.FilterEditor.fieldNames.Logic__c])&&this.checkIfLogicPadded(e)}},{key:"checkIfLogicPadded",value:function(e){if(!e)return!0;var t=["&&","!","||"];if(e.replace(/\s\s+/g," ")!=e)return!1;for(var i=0;i<t.length;i++)for(var a=t[i],l=e.indexOf(a);l>-1;){if(" "!==e[l-1]||" "!==e[l+a.length])return!1;l=e.indexOf(a,l+1)}return!0}},{key:"checkIfAllConditionsInLogic",value:function(e){if(!e)return!0;var t,i=e.match(/\d/g),a={};for(var l in this.state.conditions)a[l]=!1,t=!0;if(!t&&""!==e)return!1;for(var s=0;s<i.length;s++){var n=i[s];if("1"!==n)if("0"!==n){if(void 0===a[n])return!1;a[n]=!0}else{if(void 0===a[10])return!1;a[10]=!0}else if(e.split(10).join("").indexOf("1")>-1){if(void 0===a[1])return!1;a[1]=!0;continue}}for(var r in a)if(!a[r])return!1;return!0}},{key:"updateSelectedFields",value:function(e){this.selectedFieldsJson=JSON.stringify(e);var t=Object.assign({},this.state.ganttFilter);t[window.FilterEditor.fieldNames.Displayed_Fields__c]=this.selectedFieldsJson,this.setState({ganttFilter:t})}},{key:"save",value:function(e){if(!this.saving)if(this.state.ganttFilter[window.FilterEditor.fieldNames.Name]){for(var t in this.state.conditions)if(!this.state.conditions[t].isValid)return void window.alert(window.FilterEditor.labels.invalidCriterias);if(!this.validateLogicFilter())return console.log("BAD LOGIC"),void window.alert(window.FilterEditor.labels.invalidLogic);var i=e?null:this.state.ganttFilter.Id;this.saving=!0,window.Visualforce.remoting.Manager.invokeAction(window.FilterEditor.remoteActions.saveData,i,{Name:e||this.state.ganttFilter[window.FilterEditor.fieldNames.Name],Description:this.state.ganttFilter[window.FilterEditor.fieldNames.Description__c],Days_after_horizon:this.state.ganttFilter[window.FilterEditor.fieldNames.Days_after_horizon__c],Days_before_horizon:this.state.ganttFilter[window.FilterEditor.fieldNames.Days_before_horizon__c],Criterias:this.state.ganttFilter[window.FilterEditor.fieldNames.Criterias__c],List_only_appointments_on_the_gantt:this.state.ganttFilter[window.FilterEditor.fieldNames.List_only_appointments_on_the_gantt__c]||!1,Logic:this.state.ganttFilter[window.FilterEditor.fieldNames.Logic__c],Public:this.state.ganttFilter[window.FilterEditor.fieldNames.Public__c],Displayed_Fields:this.selectedFieldsJson||null},(function(t,i){if(i.status){if(window.parent&&window.parent.filterEditorPage)return t||alert(window.FilterEditor.labels.SomethingWentWrong),void window.parent.__closeFilterLightbox(t);if(!e&&window.location.href.toLocaleLowerCase().indexOf("?id")>-1)window.location.reload();else{var a=window.encodeURI(window.location.href.substr(0,window.location.href.indexOf("?")));window.location.href=window.encodeURI(a+"?id="+t)}}}),{buffer:!0,escape:!0,timeout:12e4})}else window.alert(window.FilterEditor.labels.MustHaveName)}}]),i}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(l.a.createElement(I,null),document.getElementById("FilterAppRoot"))}],[[9,1,2]]]);
//# sourceMappingURL=main.3de270a5.chunk.js.map